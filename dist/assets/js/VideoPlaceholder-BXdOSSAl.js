import{j as e,s as z,X as E}from"./vendor-DsacsUzc.js";import{r as n}from"./react-B2-lA1rx.js";const L=({videoId:t,embedUrl:i,thumbnail:b,title:s,subtitle:r,category:c,className:g="",aspectClass:w="aspect-video",playing:o,onPlay:u,onClose:x,showClose:j=!1})=>{const[y,d]=n.useState(!!o);n.useEffect(()=>{typeof o=="boolean"&&d(o)},[o]);const v=()=>{u&&u(),typeof o!="boolean"&&d(!0)},N=a=>{a==null||a.stopPropagation(),x&&x(),typeof o!="boolean"&&d(!1)},[l,m]=n.useState(b||(t?`https://img.youtube.com/vi/${t}/maxresdefault.jpg`:void 0)),[h,f]=n.useState(!1),k=a=>{const p=a.target.src||"";if(f(!1),t){if(p.includes("maxresdefault")){m(`https://img.youtube.com/vi/${t}/hqdefault.jpg`);return}if(p.includes("hqdefault")){m("/placeholder.svg");return}}m("/placeholder.svg")},P=()=>{f(!0)},$=i?i.replace("www.youtube.com/embed","www.youtube-nocookie.com/embed"):t?`https://www.youtube-nocookie.com/embed/${t}`:"";return e.jsx("div",{className:`relative rounded-xl overflow-hidden min-h-[200px] bg-gray-900 ${g} ${w}`,children:y?e.jsxs(e.Fragment,{children:[e.jsx("iframe",{src:`${$}?autoplay=1&rel=0&modestbranding=1&showinfo=0`,className:"absolute inset-0 w-full h-full",frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,title:s||"Video player",loading:"lazy"}),j&&e.jsx("button",{onClick:N,"aria-label":"Close video",className:"absolute top-3 right-3 z-10 bg-black/60 text-white rounded-full p-2 focus:outline-none focus:ring-2 focus:ring-primary/60",children:e.jsx(E,{className:"w-4 h-4"})}),e.jsx("noscript",{children:e.jsx("div",{className:"p-3 text-center bg-black text-white",children:e.jsx("a",{href:i||(t?`https://www.youtube.com/watch?v=${t}`:"#"),target:"_blank",rel:"noopener noreferrer",className:"underline",children:"Open video in a new tab"})})})]}):e.jsxs(e.Fragment,{children:[l&&e.jsx("img",{src:l,alt:s||"Video thumbnail",className:"absolute inset-0 w-full h-full object-cover",loading:"lazy",onError:k,onLoad:P}),(!l||!h)&&e.jsx("div",{className:"absolute inset-0 w-full h-full bg-gradient-to-br from-gray-800 via-gray-700 to-gray-900 flex items-center justify-center",children:e.jsxs("div",{className:"text-center px-4",children:[s&&e.jsx("div",{className:"text-white font-semibold mb-2 text-lg",children:s}),r&&e.jsx("div",{className:"text-sm text-white/80 mb-3",children:r}),!s&&!r&&e.jsx("div",{className:"text-white/60 text-sm",children:"Video Preview"})]})}),e.jsxs("div",{className:"absolute top-2 left-2 text-xs text-white/70 bg-black/50 px-2 py-1 rounded debug-thumb z-50 hidden",children:[l||"no-thumb"," | loaded: ",h?"yes":"no"]}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center z-20 pointer-events-none",children:e.jsx("button",{onClick:a=>{a.stopPropagation(),v()},"aria-label":s?`Play ${s}`:"Play video",className:"pointer-events-auto w-16 h-16 flex items-center justify-center bg-primary/90 rounded-full shadow-lg text-primary-foreground focus:outline-none focus:ring-2 focus:ring-primary/60 z-30",children:e.jsx(z,{className:"w-6 h-6 text-white","aria-hidden":"true"})})}),(c||s||r)&&e.jsx("div",{className:"absolute left-4 bottom-4 bg-black/40 text-white px-3 py-2 rounded-full backdrop-blur-sm max-w-[85%] z-20",children:e.jsxs("div",{className:"flex items-center gap-3",children:[c&&e.jsx("span",{className:"px-2 py-1 bg-primary/90 text-primary-foreground text-xs font-medium rounded-full",children:c}),e.jsxs("div",{className:"text-left",children:[s&&e.jsx("div",{className:"font-semibold text-sm line-clamp-1",children:s}),r&&e.jsx("div",{className:"text-xs opacity-80 line-clamp-1",children:r})]})]})})]})})};export{L as V};
